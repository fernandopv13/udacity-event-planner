<!DOCTYPE html>
<html>
	<head>
		
		<title>Event Meetup Planner Project</title>
		
		<meta charset="utf-8">
		
		<!--Import Google Icon Font () used by Materialize-->
		<link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		
		<!--Import materialize.css-->
		<link type="text/css" rel="stylesheet" href="assets/css/materialize.css"  media="screen,projection"/>

		<!--Let browser know website is optimized for mobile-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		
		<style>

			

		</style>
		
		
	</head>

	<body>

		<div id="event-list"></div>

		<div id="guest-list" class="row"></div>

		<div id="event-form" class="row">
			<form class="col s12">
				<!--h4 class="collection-header">Barts Big Bash</h4-->
				<div class="row">
					<div class="row">
						<div class="input-field col s12">
							<input id="event-name" type="text" class="validate" required>
							<label for="event-name" data-error="Please enter an event name" style="width:100%;">Event Name</label>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s12">
							<input id="event-location" type="text">
							<label for="event-location">Location</label>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s12">
							<input id="event-start-date" type="date" class="datepicker validate" required>
							<label for="event-start-date" data-error="Please enter a start date" style="width:100%;">Starts</label>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s12">
							<input id="event-end-date" type="date" class="datepicker">
							<label for="event-end-date" data-error="End date cannot be before start date" style="width:100%;">Ends</label>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s12">
							<input id="event-type" list="event-types" type="text">
							<label for="event-type">Event Type</label>
							<datalist id="event-types">
								<option value="Anniversary"></option>
								<option value="Birthday"></option>
								<option value="Family gathering"></option>
								<option value="Party"></option>
								<option value="Religious festival"></option>
								<option value="Wedding"></option>
							</datalist>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s12">
							<input id="event-capacity" placeholder="Max. number of guests" type="number" min="0" step="1" value="50" class="validate" required>
							<label for="event-capacity" data-error="Please enter capacity" class="active" style="width:100%;">Capacity</label>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s12">
							<input id="event-host" type="text" class="validate">
							<label for="event-host">Host</label>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s12">
							<textarea id="event-description" class="materialize-textarea" maxlength="250"></textarea>
							<label for="event-description">Description</label>
						</div>
					</div>
					<div class="row">
						<a id="event-form-submit" class="waves-effect waves-light btn"><i class="material-icons left">check</i>Done</a>
					</div>
				</div>
			</form>
		</div>

		

		<!-- Library source files -->
		<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script> <!--Import jQuery before materialize.js-->
		<script type="text/javascript" src="lib/materialize-0.97.5.min.js"></script>
		
		<!-- App source files -->
		<script src="assets/js/Object.js"></script>
		<script src="assets/js/Error.js"></script>
		<script src="assets/js/InterfaceHelper.js"></script>
		<script src="assets/js/IHost.js"></script>
		<script src="assets/js/IObserver.js"></script>
		<script src="assets/js/IObservable.js"></script>
		<script src="assets/js/ISerializable.js"></script>
		<script src="assets/js/IViewable.js"></script>
		<script src="assets/js/ObjectRegistry.js"></script>
		<script src="assets/js/Email.js"></script>
		<script src="assets/js/Password.js"></script>
		<script src="assets/js/Person.js"></script>
		<script src="assets/js/PersonView.js"></script>
		<script src="assets/js/Organization.js"></script>
		<script src="assets/js/Event.js"></script>
		<script src="assets/js/EventView.js"></script>
		<script src="assets/js/Account.js"></script>
		<script src="assets/js/FoursquareSearch.js"></script>
		<script src="assets/js/Controller.js"></script>
		<script src="assets/js/app.js"></script>
		<script src="test/util/data.js"></script>
		

		<script>

			/** Interactive validation of start/end date fields */

			(function() { // start date
							
				$('#event-start-date').pickadate({
					
					onClose: function() {

						var $start = $('#event-start-date'), 

						end = $('#event-end-date').val();
						
						
						if (!isNaN(Date.parse(end))) { // end date exists

							if (new Date($start.val()) > new Date(end)) { // start is after end

								$('#event-start-date')[0].labels[0].dataset.error = 'Start date cannot be after end date';

								$('#event-start-date')[0].classList.add('invalid');
							}
						}
					}
				});
			})();
			
			/* Interactive validation of capacity field */

			void document.getElementById('event-capacity').addEventListener('keyup', function(event) {

				if (event.target.value === '') { // empty

					event.target.labels[0].dataset.error = 'Please enter capacity';

					event.target.classList.add('invalid');
				}

				// testing for non-number entry doesn't work, keypress doesn't fire

				else if (event.target.validity.rangeUnderflow) { // negative number

					event.target.labels[0].dataset.error = 'Capacity cannot be negative';

					event.target.classList.add('invalid');
				}
				
				else { // valid

					event.target.classList.remove('invalid');

					event.target.labels[0].dataset.error = 'Please enter capacity';
				}
			});

			void document.getElementById("event-start-date").addEventListener('change', function(event) {

				console.log(event);
			});

		</script>

		<script type="text/javascript">
			window.onload = function() {
				app.init();

				$('.datepicker').pickadate({
					selectMonths: true, // Creates a dropdown to control month
					selectYears: 15 // Creates a dropdown of 15 years to control year
				});
			};
		</script>

	</body>
</html>
